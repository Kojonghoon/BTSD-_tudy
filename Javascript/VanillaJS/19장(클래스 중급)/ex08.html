<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>함수 단위의 코딩</title>
  <link rel="stylesheet" href="./css/ex07.css">
  <script src="../libs/code.jquery.com_jquery-3.7.0.js"></script>
  <script>
    $(document).ready(function () {
      var tab1 = tabMenu("#tabMenu1")
      tab1.setSelectItemAt(1)
      var tab2 = tabMenu("#tabMenu2")
      tab2.setSelectItemAt(2)
    })

    //tabMenu함수
    function tabMenu(selector) {
      var $tabMenu = null;
      var $menuItems = null;
      var $selectedMenuItem = null;

      //중첩함수
      function init(selector) {
        $tabMenu = $(selector)
        $menuItems = $tabMenu.find("li")
      }

      //이벤트 등록 initEvent()만들기
      function initEvent() {
        $menuItems.on("click", function () {
          setSelectItem($(this))
        })
      }

      //$menuItems에서 사용자가 클릭한 메뉴아이템을 선택하는 코드처리
      function setSelectItem($menuItem) {
        //기존에 선택되어져 있는 메뉴가 있다면... 삭제하라.
        if ($selectedMenuItem) {
          $selectedMenuItem.removeClass("select")
        }
        //새로운 선택된 메뉴아이템을 처리하는 코드
        $selectedMenuItem = $menuItem
        $selectedMenuItem.addClass("select")
      }

      //index에 해당하는 메뉴 아이템 선택하는 중첩함수
      function setSelectItemAt(index) {
        var $menuItem = $menuItems.eq(index)
        setSelectItem($menuItems.eq(index))
      }
      //초기화 함수 호출
      init(selector)
      initEvent()

      //기능 리턴 - 중요하다
      return {
        "setSelectItemAt": setSelectItemAt
      }
    }
  </script>
</head>

<body>
  <p>첫 번째 탭 메뉴</p>
  <ul class="tab-menu" id="tabMenu1">
    <li class="menuitem1">google</li>
    <li class="menuitem2">facebook</li>
    <li class="menuitem3">pinterest</li>
    <li class="menuitem4">twitter</li>
    <li class="menuitem5">airbnb</li>
    <li class="menuitem6">path</li>
  </ul>
  <br />
  <br />
  <br />
  <p>두 번째 탭 메뉴</p>
  <ul class="tab-menu" id="tabMenu2">
    <li class="menuitem1">google</li>
    <li class="menuitem2">facebook</li>
    <li class="menuitem3">pinterest</li>
    <li class="menuitem4">twitter</li>
    <li class="menuitem5">airbnb</li>
    <li class="menuitem6">path</li>
  </ul>
</body>

</html>